<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://early.webawesome.com/webawesome@3.0.0-beta.4/dist/styles/webawesome.css"
    />
    <link rel="stylesheet" href="../styles/output.css" />

    <title></title>
  </head>
  <body>
    <div class="p-2 pt-4">
      <a href="/folders/"><%= currentUser.username %></a>
    </div>
    <div class="container">
      <% function renderTree(tree) { %> <% if (tree && tree.length > 0) { %>
      <ul>
        <% for (let children of tree) { %>
        <li>
          <div class="btn-wrapper flex items-center justify-between px-2">
            <a href="/folders/<%= children.id %>"><%= children.name %></a>
            <button class="dropdownBtn max-w-[20px]">
              <svg
                viewBox="0 0 16 16"
                xmlns="http://www.w3.org/2000/svg"
                class="bi bi-three-dots-vertical svg-icon"
              >
                <path
                  d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"
                />
              </svg>
            </button>
          </div>
        </li>
        <!-- dropdown for rename and delete -->
        <div class="dropdown-content">
          <div
            class="editFolderModalOpenBtn flex flex-row cursor-pointer"
            data-id="<%= children.id %>"
            data-name="<%= children.name %>"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" class="svg-icon">
              <defs>
                <style>
                  .cls-1 {
                    fill: #231f20;
                  }
                </style>
              </defs>
              <g id="pencil">
                <path
                  class="cls-1"
                  d="m21.84 5-4.31-3.62a1.17 1.17 0 0 0-.87-.27 1.15 1.15 0 0 0-.8.42L3.1 16.65a.54.54 0 0 0-.11.26l-.84 6.44a.5.5 0 0 0 .49.56h.15L9 22a.47.47 0 0 0 .24-.15L22 6.69A1.19 1.19 0 0 0 21.84 5zm-.62 1L8.56 21l-5.32 1.7.76-5.51 12.66-15a.21.21 0 0 1 .27 0l4.27 3.59a.19.19 0 0 1 .02.27z"
                />
                <path
                  class="cls-1"
                  d="M15 5.75a.51.51 0 0 0-.71.06.49.49 0 0 0 .06.7l3.05 2.61a.49.49 0 0 0 .32.12.52.52 0 0 0 .38-.17.51.51 0 0 0-.1-.71z"
                />
              </g>
            </svg>
            <span>Rename</span>
          </div>
          <div
            class="deleteFolderModalOpenBtn flex flex-row cursor-pointer"
            data-id="<%= children.id %>"
            data-name="<%= children.name %>"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 25 25"
              height="15px"
              width="15px"
              class=""
            >
              <defs>
                <style>
                  .cls-1 {
                    fill: #231f20;
                  }
                </style>
              </defs>
              <g id="trash">
                <path
                  class="cls-1"
                  d="M20.5 4h-3.64l-.69-2.06a1.37 1.37 0 0 0-1.3-.94h-4.74a1.37 1.37 0 0 0-1.3.94L8.14 4H4.5a.5.5 0 0 0 0 1h.34l1 17.59A1.45 1.45 0 0 0 7.2 24h10.6a1.45 1.45 0 0 0 1.41-1.41L20.16 5h.34a.5.5 0 0 0 0-1zM9.77 2.26a.38.38 0 0 1 .36-.26h4.74a.38.38 0 0 1 .36.26L15.81 4H9.19zm8.44 20.27a.45.45 0 0 1-.41.47H7.2a.45.45 0 0 1-.41-.47L5.84 5h13.32z"
                />
                <path
                  class="cls-1"
                  d="M9.5 10a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 1 0v-7a.5.5 0 0 0-.5-.5zM12.5 9a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 1 0v-9a.5.5 0 0 0-.5-.5zM15.5 10a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 1 0v-7a.5.5 0 0 0-.5-.5z"
                />
              </g>
            </svg>
            <span class="pl-2.5">Delete</span>
          </div>
        </div>
        <% if (children.children && children.children.length > 0) { %> <%
        renderTree(children.children); %> <%} } %>
      </ul>
      <%} } %>
    </div>

    <% renderTree(tree) %>
  </body>
  <script type="module" src="../../folders/editFolder.js"></script>
  <script
    type="module"
    src="https://early.webawesome.com/webawesome@3.0.0-beta.4/dist/webawesome.loader.js"
  ></script>
</html>
